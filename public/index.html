<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Telefonchi Mini App"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      // Check if we're on the localtunnel verification page and handle it
      document.addEventListener('DOMContentLoaded', function() {
        // Check if page shows localtunnel verification
        if (document.body && (
          document.body.textContent.includes('tunnel password') ||
          document.body.textContent.includes('localtunnel') ||
          document.querySelector('input[type="password"]')
        )) {
          // Try to auto-submit with bypass or redirect
          const passwordField = document.querySelector('input[type="password"]');
          if (passwordField) {
            // Try bypassing by submitting empty or special bypass code
            passwordField.value = 'bypass';
            const form = passwordField.closest('form');
            if (form) {
              form.submit();
            }
          }

          // Also try redirect with bypass parameters
          setTimeout(() => {
            if (window.location.href.indexOf('bypass=true') === -1) {
              window.location.href = window.location.origin + '?bypass=true&from=telegram';
            }
          }, 1000);
        }
      });

      // Automatically add bypass headers for localtunnel
      if (window.XMLHttpRequest) {
        const originalOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(...args) {
          const result = originalOpen.apply(this, args);
          this.setRequestHeader('bypass-tunnel-reminder', 'true');
          this.setRequestHeader('Cache-Control', 'no-cache');
          this.setRequestHeader('User-Agent', 'TelegramBot');
          return result;
        };
      }

      if (window.fetch) {
        const originalFetch = window.fetch;
        window.fetch = function(url, options = {}) {
          options.headers = {
            ...options.headers,
            'bypass-tunnel-reminder': 'true',
            'Cache-Control': 'no-cache',
            'User-Agent': 'TelegramBot'
          };
          return originalFetch(url, options);
        };
      }
    </script>
    <title>Telefonchi Mini App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
